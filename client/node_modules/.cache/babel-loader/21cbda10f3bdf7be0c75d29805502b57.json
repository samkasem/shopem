{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/shopem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/shopem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Projects/shopem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{useSelector}from'react-redux';import{useLocation}from'react-router-dom';import{userRequest}from'../requestMethods';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Success=function Success(){var location=useLocation();var data=location.state.stripeData;var cart=location.state.cart;var currentUser=useSelector(function(state){return state.user.currentUser;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),orderId=_useState2[0],setOrderId=_useState2[1];useEffect(function(){var createOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userRequest.post('/orders',{userId:currentUser._id,products:cart.products.map(function(item){return{productId:item._id,quantity:item._quantity};}),amount:cart.total,address:data.billing_details.address});case 3:res=_context.sent;setOrderId(res.data._id);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function createOrder(){return _ref.apply(this,arguments);};}();data&&createOrder();},[cart,data,currentUser]);return/*#__PURE__*/_jsxs(\"div\",{style:{height:'100vh',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'},children:[orderId?\"Order has been created successfully. Your order number is \".concat(orderId):\"Successfull. Your order is being prepared...\",/*#__PURE__*/_jsx(\"button\",{style:{padding:10,marginTop:20},children:\"Go to Homepage\"})]});};export default Success;","map":{"version":3,"names":["useEffect","useState","useSelector","useLocation","userRequest","Success","location","data","state","stripeData","cart","currentUser","user","orderId","setOrderId","createOrder","post","userId","_id","products","map","item","productId","quantity","_quantity","amount","total","address","billing_details","res","height","display","flexDirection","alignItems","justifyContent","padding","marginTop"],"sources":["D:/Projects/shopem/client/src/pages/Success.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation } from 'react-router-dom'\r\nimport { userRequest } from '../requestMethods'\r\n\r\nconst Success = () => {\r\n  const location = useLocation()\r\n  const data = location.state.stripeData\r\n  const cart = location.state.cart\r\n  const currentUser = useSelector((state) => state.user.currentUser)\r\n  const [orderId, setOrderId] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const createOrder = async () => {\r\n      try {\r\n        const res = await userRequest.post('/orders', {\r\n          userId: currentUser._id,\r\n          products: cart.products.map((item) => ({\r\n            productId: item._id,\r\n            quantity: item._quantity,\r\n          })),\r\n          amount: cart.total,\r\n          address: data.billing_details.address,\r\n        })\r\n        setOrderId(res.data._id)\r\n      } catch {}\r\n    }\r\n    data && createOrder()\r\n  }, [cart, data, currentUser])\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n      }}\r\n    >\r\n      {orderId\r\n        ? `Order has been created successfully. Your order number is ${orderId}`\r\n        : `Successfull. Your order is being prepared...`}\r\n      <button style={{ padding: 10, marginTop: 20 }}>Go to Homepage</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Success\r\n"],"mappings":"6aAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,KAA4B,mBAA5B,C,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CACpB,GAAMC,SAAQ,CAAGH,WAAW,EAA5B,CACA,GAAMI,KAAI,CAAGD,QAAQ,CAACE,KAAT,CAAeC,UAA5B,CACA,GAAMC,KAAI,CAAGJ,QAAQ,CAACE,KAAT,CAAeE,IAA5B,CACA,GAAMC,YAAW,CAAGT,WAAW,CAAC,SAACM,KAAD,QAAWA,MAAK,CAACI,IAAN,CAAWD,WAAtB,EAAD,CAA/B,CAJoB,cAKUV,QAAQ,CAAC,IAAD,CALlB,wCAKbY,OALa,eAKJC,UALI,eAOpBd,SAAS,CAAC,UAAM,CACd,GAAMe,YAAW,0FAAG,iLAEEX,YAAW,CAACY,IAAZ,CAAiB,SAAjB,CAA4B,CAC5CC,MAAM,CAAEN,WAAW,CAACO,GADwB,CAE5CC,QAAQ,CAAET,IAAI,CAACS,QAAL,CAAcC,GAAd,CAAkB,SAACC,IAAD,QAAW,CACrCC,SAAS,CAAED,IAAI,CAACH,GADqB,CAErCK,QAAQ,CAAEF,IAAI,CAACG,SAFsB,CAAX,EAAlB,CAFkC,CAM5CC,MAAM,CAAEf,IAAI,CAACgB,KAN+B,CAO5CC,OAAO,CAAEpB,IAAI,CAACqB,eAAL,CAAqBD,OAPc,CAA5B,CAFF,QAEVE,GAFU,eAWhBf,UAAU,CAACe,GAAG,CAACtB,IAAJ,CAASW,GAAV,CAAV,CAXgB,iJAAH,kBAAXH,YAAW,0CAAjB,CAcAR,IAAI,EAAIQ,WAAW,EAAnB,CACD,CAhBQ,CAgBN,CAACL,IAAD,CAAOH,IAAP,CAAaI,WAAb,CAhBM,CAAT,CAkBA,mBACE,aACE,KAAK,CAAE,CACLmB,MAAM,CAAE,OADH,CAELC,OAAO,CAAE,MAFJ,CAGLC,aAAa,CAAE,QAHV,CAILC,UAAU,CAAE,QAJP,CAKLC,cAAc,CAAE,QALX,CADT,WASGrB,OAAO,qEACyDA,OADzD,gDATV,cAYE,eAAQ,KAAK,CAAE,CAAEsB,OAAO,CAAE,EAAX,CAAeC,SAAS,CAAE,EAA1B,CAAf,4BAZF,GADF,CAgBD,CAzCD,CA2CA,cAAe/B,QAAf"},"metadata":{},"sourceType":"module"}